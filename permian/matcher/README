
Nil := undefined | null
Struct := Object | Array | Number | Boolean | Symbol | String
AnyStruct := Struct | Nil
Any := AnyStruct | Function 


* Matcher
---------

var matcher = MatcherBuilder()
  .all()                          // one or zero occurence; when present then all matching  on()'s  results are pushed into the result array
  .on(o1, o2)                     // one or zero occurence
  .on(o1, o2)             
  .otherwise(otw)                 // one or zero occurence;  otherwise()  without  on()  is always invoked
                                  // when there is no  otherwise()  and no  on()  then an error is thrown 
  .build()        

var result = matcher(arg)


  # |  o1            o2            otw          |  arg          |  result
----+-------------------------------------------+---------------+-------------------------------------------------------
  1 |  AnyStruct     AnyStruct     AnyStruct    |  AnyStruct    |  IF (arg === o1)  THEN  o2       ELSE otw 
  2 |  AnyStruct     Function      AnyStruct    |  AnyStruct    |  IF (arg === o1)  THEN  o2(arg)  ELSE otw 
  3 |  AnyStruct     AnyStruct     Function     |  AnyStruct    |  IF (arg === o1)  THEN  o2       ELSE otw(arg) 
  4 |  AnyStruct     Function      Function     |  AnyStruct    |  IF (arg === o1)  THEN  o2(arg)  ELSE otw(arg) 
  5 |  Function      AnyStruct     AnyStruct    |  AnyStruct    |  IF o1(arg)       THEN  o2       ELSE otw 
  6 |  Function      Function      AnyStruct    |  AnyStruct    |  IF o1(arg)       THEN  o2(arg)  ELSE otw 
  7 |  Function      AnyStruct     Function     |  AnyStruct    |  IF o1(arg)       THEN  o2       ELSE otw(arg) 
  8 |  Function      Function      Function     |  AnyStruct    |  IF o1(arg)       THEN  o2(arg)  ELSE otw(arg) 



* When
------

var when = WhenBuilder()
  .isNil(n)                // one or zero occurence, must be first if present
  .then(t)                 // one or zero occurence
  .otherwise(o)            // one or zero occurence, must be last if present
  .build()

var result = when(arg)

var result = when(arg())

  # |  n            t             o             |  arg          |  result
----+-------------------------------------------+---------------+--------------------------------------------------------------------------------
  0 |  -            -             -             |  Any          |  undefined
  1 |  AnyStruct    AnyStruct     AnyStruct     |  Any          |  IF isNil(arg)  THEN n       ELSE IF evalBool(arg)  THEN t       ELSE o
  2 |  Function     AnyStruct     AnyStruct     |  Any          |  IF isNil(arg)  THEN n(arg)  ELSE IF evalBool(arg)  THEN t       ELSE o
  3 |  AnyStruct    AnyStruct     Function      |  Any          |  IF isNil(arg)  THEN n       ELSE IF evalBool(arg)  THEN t       ELSE o(arg)
  4 |  Function     AnyStruct     Function      |  Any          |  IF isNil(arg)  THEN n(arg)  ELSE IF evalBool(arg)  THEN t       ELSE o(arg)
  5 |  AnyStruct    Function      AnyStruct     |  Any          |  IF isNil(arg)  THEN n       ELSE IF evalBool(arg)  THEN t(arg)  ELSE o
  6 |  Function     Function      AnyStruct     |  Any          |  IF isNil(arg)  THEN n(arg)  ELSE IF evalBool(arg)  THEN t(arg)  ELSE o
  7 |  AnyStruct    Function      Function      |  Any          |  IF isNil(arg)  THEN n       ELSE IF evalBool(arg)  THEN t(arg)  ELSE o(arg)
  8 |  Function     Function      Function      |  Any          |  IF isNil(arg)  THEN n(arg)  ELSE IF evalBool(arg)  THEN t(arg)  ELSE o(arg)


